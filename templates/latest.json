{% set qr = this.graph.query('''
select distinct 
?about 
#(sample(?label) as ?label) 
(max(coalesce(?modified, ?created)) as ?updated) 
(sample(?description) as ?description) 
#(group_concat(distinct ?type; separator="||") as ?types)
where {                                                                                                 
  graph ?np {
    ?np 
        np:hasPublicationInfo ?pubinfo;
        np:hasAssertion ?assertion.
  }
  graph ?pubinfo {
    optional {
      ?assertion dc:created ?created.
    }
    optional {
      ?assertion dc:modified ?modified.
    }
  }
#  { 
    graph ?np { ?np sio:isAbout ?about.}
    filter not exists {
      [] ?about [].
    }
#  } union { 
#    graph ?assertion {
#      ?about ?p ?o.
#      filter not exists {
#        [] ?pred ?about.
#      }
#    }
#  }
#  ?about dc:title|rdfs:label|skos:prefLabel|skos:altLabel|foaf:name ?label.
  optional {
    ?about dc:description|rdfs:comment|dc:abstract|dc:summary|<http://purl.obolibrary.org/obo/IAO_0000115> ?description
  }

#  ?about a ?type.

} group by ?about order by desc (?updated)
LIMIT 20
''', initNs=ns.prefixes) %}
[
    {% for row in qr %}
    {{row.asdict()|labelize|tojson}}{% if not loop.last %},{% endif %}
    {% endfor %}
]
